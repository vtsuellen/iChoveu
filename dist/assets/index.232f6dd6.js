(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}})();const g="347f6d56ed5143de8c6182632232505",v=async c=>{const t=await(await fetch(`http://api.weatherapi.com/v1/search.json?lang=pt&key=${g}&q=${c}`)).json();return t.length||window.alert("Nenhuma cidade encontrada"),t},x=async c=>{const t=await(await fetch(`http://api.weatherapi.com/v1/current.json?lang=pt&key=${g}&q=${c}`)).json();return{name:t.location.name,country:t.location.country,temp:t.current.temp_c,condition:t.current.condition.text,icon:t.current.condition.icon,url:c}},k=async c=>(await(await fetch(`http://api.weatherapi.com/v1/forecast.json?lang=pt&key=${g}&q=${c}&days=${7}`)).json()).forecast.forecastday.map(s=>({date:s.date,maxTemp:s.day.maxtemp_c,minTemp:s.day.mintemp_c,condition:s.day.condition.text,icon:s.day.condition.icon}));function o(c,a,t=""){const i=document.createElement(c);return i.classList.add(...a.split(" ")),i.textContent=t,i}function I(c){const{date:a,maxTemp:t,minTemp:i,condition:e,icon:n}=c,s=new Date(a);s.setDate(s.getDate()+1);const l=s.toLocaleDateString("pt-BR",{weekday:"short"}),r=o("div","forecast"),h=o("p","forecast-weekday",l),y=o("span","forecast-temp max","max"),C=o("span","forecast-temp max",`${t}\xBA`),E=o("span","forecast-temp min","min"),p=o("span","forecast-temp min",`${i}\xBA`),d=o("div","forecast-temp-container");d.appendChild(y),d.appendChild(E),d.appendChild(C),d.appendChild(p);const m=o("p","forecast-condition",e),u=o("img","forecast-icon");u.src=n.replace("64x64","128x128");const f=o("div","forecast-middle-container");return f.appendChild(d),f.appendChild(u),r.appendChild(h),r.appendChild(f),r.appendChild(m),r}function w(c){const a=document.getElementById(c);for(;a.firstChild;)a.removeChild(a.firstChild)}function L(c){const a=document.getElementById("forecast-container"),t=document.getElementById("weekdays");w("weekdays"),c.forEach(i=>{const e=I(i);t.appendChild(e)}),a.classList.remove("hidden")}function B(c){const{name:a,country:t,temp:i,condition:e,icon:n,url:s}=c,l=o("li","city"),r=o("div","city-heading"),h=o("h2","city-name",a),y=o("p","city-country",t);r.appendChild(h),r.appendChild(y);const C=o("p","city-temp",`${i}\xBA`),E=o("p","city-condition",e),p=o("div","city-temp-container");p.appendChild(E),p.appendChild(C);const d=o("img","condition-icon");d.src=n.replace("64x64","128x128");const m=o("div","city-info-container");m.appendChild(p),m.appendChild(d),l.appendChild(r),l.appendChild(m);const u=o("button","forecastButton","Ver previs\xE3o");return l.appendChild(u),u.addEventListener("click",async()=>{const f=await k(s);await L(f)}),l}async function $(c){c.preventDefault(),w("cities");const t=document.getElementById("search-input").value,i=await v(t);(await Promise.all(i.map(n=>x(n.url)))).forEach(n=>{document.getElementById("cities").appendChild(B(n))})}document.getElementById("search-form").addEventListener("submit",$);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
